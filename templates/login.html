{# ==============================
  templates/login.html
  ============================== #}
{% extends 'base.html' %}
{% block content %}

<style>
 .auth-bg {
   min-height: calc(100vh - 56px);
   background: radial-gradient(1200px 600px at 10% -10%, #0ea5e922, transparent 60%),
               radial-gradient(900px 500px at 110% 10%, #22d3ee22, transparent 60%),
               linear-gradient(180deg, #0b151c, #071017);
   display:flex; align-items:center; justify-content:center;
 }
 .auth-card {
   width: 100%;
   max-width: 480px;
   background: rgba(15, 23, 42, 0.65);
   backdrop-filter: blur(10px);
   border: 1px solid rgba(255,255,255,0.08);
   box-shadow: 0 20px 50px rgba(0,0,0,.35);
   border-radius: 16px;
   color: #e5e7eb;
 }
 .auth-card .card-header {
   border-bottom: 1px solid rgba(255,255,255,0.08);
   background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
   color:#001018;
   border-top-left-radius: 16px;
   border-top-right-radius: 16px;
   padding: 1.25rem 1.5rem;
 }
 .brand-title { font-weight: 700; letter-spacing:.2px; display:flex; align-items:center; gap:.5rem; }
 .brand-title .badge { background:#001018; color:#7dd3fc; border:1px solid #0ea5e9; }
 .auth-body { padding: 1.25rem 1.5rem 1.5rem; }
 .form-floating>.form-control, .form-floating>.form-control:focus {
   background-color: rgba(2,6,23,0.4);
   border: 1px solid #334155;
   color: #e5e7eb;
 }
 .form-floating>label { color: #9ca3af; }
 .form-control:focus { border-color: #22d3ee; box-shadow: 0 0 0 .2rem rgba(34,211,238,.15); }
 .btn-gradient { background: linear-gradient(135deg, #0ea5e9 0%, #22d3ee 100%); border:none; color:#001018; font-weight:700; }
 .btn-gradient:hover { filter: brightness(0.95); }
 .is-invalid { border-color:#ef4444 !important; }
 .invalid-feedback { display:block; color:#fecaca; }
</style>

<div class="auth-bg">
 <div class="card auth-card">
   <div class="card-header">
     <div class="brand-title">
       <i class="bi bi-bounding-box-circles"></i>
       AutoDock-Vina PrepServer
       <span class="badge rounded-pill ms-auto">Sign in</span>
     </div>
   </div>

   <div class="auth-body">

     {% with messages = get_flashed_messages(with_categories=true) %}
       {% if messages %}
         {% for category, msg in messages %}
           <div class="alert alert-{{ 'danger' if category=='error' else category }} py-2 mb-3" role="alert">
             {{ msg }}
           </div>
         {% endfor %}
       {% endif %}
     {% endwith %}

     <form method="post" novalidate>
       {{ form.hidden_tag() }}

       <div class="form-floating mb-3">
         {{ form.email(class_='form-control ' + ('is-invalid' if form.email.errors else ''), placeholder='name@example.com', autocomplete='username') }}
         <label for="{{ form.email.id }}"><i class="bi bi-envelope me-1"></i>Email</label>
         {% if form.email.errors %}
           <div class="invalid-feedback">{{ form.email.errors[0] }}</div>
         {% endif %}
       </div>

       <div class="form-floating mb-3">
         {{ form.password(class_='form-control ' + ('is-invalid' if form.password.errors else ''), placeholder='••••••••', autocomplete='current-password') }}
         <label for="{{ form.password.id }}"><i class="bi bi-shield-lock me-1"></i>Password</label>
         {% if form.password.errors %}
           <div class="invalid-feedback">{{ form.password.errors[0] }}</div>
         {% endif %}
       </div>

       <div class="d-flex align-items-center justify-content-between mb-3">
         <div class="form-check">
           <input class="form-check-input" type="checkbox" value="1" id="rememberCheck" name="remember">
           <label class="form-check-label" for="rememberCheck">Remember me</label>
         </div>
         <a class="link-light link-underline-opacity-25 link-underline-opacity-100-hover small" href="/auth/forgot">Forgot password?</a>
       </div>

       {{ form.submit(class_='btn btn-gradient w-100 py-2') }}
     </form>

     <!-- Access + About buttons -->
     <div class="mt-3">
       <div class="small text-secondary mb-2">Don’t have access?</div>
       <div class="d-grid gap-2">
         <!-- Request Access (email) -->
         <a
           class="btn btn-outline-info w-100"
           href="mailto:jmschulz@med.miami.edu?subject=Docking%20Server%20Access%20Request&body=Hi%20Dr.%20Schulz,%0D%0A%0D%0AI%27d%20like%20access%20to%20the%20Docking%20Server.%0D%0A%0D%0AName:%20%0D%0AAffiliation:%20%0D%0AUse%20case:%20%0D%0A%0D%0AThanks!"
         >
           <i class="bi bi-envelope-open me-1"></i> Request Access
         </a>

         <!-- Read About this tool -->
         <a
           class="btn btn-outline-light w-100"
           href="https://github.com/Joey305/autodock-WEBSERVER"
           target="_blank" rel="noopener"
         >
           <i class="bi bi-book me-1"></i> Read About this tool!
         </a>
       </div>
     </div>

   </div>
 </div>
</div>

{% endblock %}
